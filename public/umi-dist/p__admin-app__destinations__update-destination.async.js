"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[589],{51042:function(C,f,t){var x=t(1413),p=t(67294),c=t(42110),r=t(91146),n=function(m,h){return p.createElement(r.Z,(0,x.Z)((0,x.Z)({},m),{},{ref:h,icon:c.Z}))},e=p.forwardRef(n);f.Z=e},90672:function(C,f,t){var x=t(1413),p=t(91),c=t(67294),r=t(72381),n=t(85893),e=["fieldProps","proFieldProps"],D=function(h,s){var K=h.fieldProps,b=h.proFieldProps,k=(0,p.Z)(h,e);return(0,n.jsx)(r.Z,(0,x.Z)({ref:s,valueType:"textarea",fieldProps:K,proFieldProps:b},k))};f.Z=c.forwardRef(D)},58547:function(C,f,t){t.d(f,{h:function(){return p},y:function(){return c}});var x=t(67294),p=function(n){return console.log("Upload event:",n),Array.isArray(n)?n:n&&n.fileList},c=function(n){return new Promise(function(e,D){var m=new FileReader;m.readAsDataURL(n.file.originFileObj),m.onload=function(){var h=m.result;console.log("DataURL: test",h),e(h)},m.onerror=function(h){return D(h)}})}},16801:function(C,f,t){t.d(f,{p:function(){return x}});var x=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(r){setTimeout(function(){r(!0)},c)})}},49790:function(C,f,t){var x=t(67294),p=t(4393),c=t(71230),r=t(15746),n=t(99559),e=t(85893),D=function(h){var s=h.active;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(p.Z,{style:{marginBlockEnd:15},children:(0,e.jsxs)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsxs)(r.Z,{span:6,children:[(0,e.jsx)(n.Z.Image,{active:s,style:{width:"210px",maxWidth:"240px",height:"200px",marginBlockEnd:10}}),(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Button,{active:s,style:{width:"140px",maxWidth:"200px",height:"35px",marginLeft:"20px"}})})]}),(0,e.jsxs)(r.Z,{span:18,children:[(0,e.jsxs)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsxs)(r.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(r.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(r.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]})]}),(0,e.jsx)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:(0,e.jsxs)(r.Z,{span:24,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]})})]})]})}),(0,e.jsx)(p.Z,{style:{marginBlockEnd:15},children:(0,e.jsx)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:(0,e.jsx)(r.Z,{span:24,children:(0,e.jsxs)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsxs)(r.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(r.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(r.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]})]})})})}),(0,e.jsx)(p.Z,{style:{marginBlockEnd:15},children:(0,e.jsx)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:(0,e.jsx)(r.Z,{span:24,children:(0,e.jsxs)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsxs)(r.Z,{span:12,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(r.Z,{span:12,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]})]})})})}),(0,e.jsx)(p.Z,{children:(0,e.jsx)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:(0,e.jsx)(r.Z,{span:24,children:(0,e.jsxs)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsxs)(r.Z,{span:12,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(r.Z,{span:12,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]})]})})})})]})};f.Z=D},57457:function(C,f,t){t.r(f);var x=t(97857),p=t.n(x),c=t(5574),r=t.n(c),n=t(15009),e=t.n(n),D=t(99289),m=t.n(D),h=t(6110),s=t(34994),K=t(2236),b=t(58128),k=t(5966),se=t(90672),N=t(55895),V=t(64317),J=t(2453),ie=t(53025),Q=t(71230),y=t(15746),X=t(14726),de=t(55060),ce=t(66476),Y=t(51042),_e=t(88484),ue=t(87547),O=t(67294),M=t(35312),je=t(49790),q=t(16801),ee=t(58547),a=t(85893),te={title:"",description:"",image_url:"",accommodations:"",attractions:""},me=function(){var ne=m()(e()().mark(function U(o){var Z,W;return e()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",o),console.log("values"),console.log(o),Z=new FormData,console.log("formData - before"),console.log(Z),Z.append("title",o==null?void 0:o.title),Z.append("description",o==null?void 0:o.description),Z.append("image",o==null?void 0:o.image),console.log("formData - after"),console.log(Z),g.prev=12,W={id:o==null?void 0:o.destination_id,title:o==null?void 0:o.title,description:o==null?void 0:o.description,image:o==null?void 0:o.image,accommodations:o==null?void 0:o.accommodations.map(function(E){return E==null?void 0:E.accommodation}),attractions:o==null?void 0:o.attractions.map(function(E){return E==null?void 0:E.attraction})},g.next=16,(0,M.request)("/api/destinations/"+(o==null?void 0:o.destination_id),{method:"PUT",data:W}).then(function(){var E=m()(e()().mark(function A(j){var I,T;return e()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:console.log("api_response"),console.log(j),(j==null||(I=j.data)===null||I===void 0?void 0:I.id)>0&&(J.ZP.success("Submitted successfully"),M.history.push("/admin-app/destinations/edit/"+(j==null||(T=j.data)===null||T===void 0?void 0:T.id)));case 3:case"end":return R.stop()}},A)}));return function(A){return E.apply(this,arguments)}}()).catch(function(E){console.log(E)});case 16:return g.abrupt("return",g.sent);case 19:g.prev=19,g.t0=g.catch(12),console.log("api_response - error"),console.log(g.t0);case 23:return g.abrupt("return",!0);case 24:case"end":return g.stop()}},U,null,[[12,19]])}));return function(o){return ne.apply(this,arguments)}}(),pe=function(){var U=(0,M.useParams)(),o=ie.Z.useForm(),Z=r()(o,1),W=Z[0],ae=(0,O.useState)("https://vu.project.wpvisions.com/images/default/placeholder.jpg"),g=r()(ae,2),E=g[0],A=g[1],j=(0,O.useState)(0),I=r()(j,2),T=I[0],oe=I[1],R=(0,O.useState)([]),le=r()(R,2),ge=le[0],he=le[1],Ee=(0,O.useState)([]),re=r()(Ee,2),fe=re[0],ve=re[1];(0,O.useEffect)(function(){oe(U.id)},[]),(0,O.useEffect)(function(){return(0,M.request)("/api/accommodations",{params:{page:1,per_page:1e3,order_by:"id",order:"asc"}}).then(function(){var _=m()(e()().mark(function l(i){var P;return e()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:console.log("api_response"),console.log(i),console.log("api_response.data"),console.log(i.data),console.log("api_response.data.data"),console.log(i.data.data),P=i.data.data.map(function(B,d){return{value:B.id,label:B.title}}),console.log("table_data"),console.log(P),he(P);case 10:case"end":return v.stop()}},l)}));return function(l){return _.apply(this,arguments)}}()).catch(function(_){console.log(_)})},[]),(0,O.useEffect)(function(){return(0,M.request)("/api/attractions",{params:{page:1,per_page:1e3,order_by:"id",order:"asc"}}).then(function(){var _=m()(e()().mark(function l(i){var P;return e()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:console.log("api_response"),console.log(i),console.log("api_response.data"),console.log(i.data),console.log("api_response.data.data"),console.log(i.data.data),P=i.data.data.map(function(B,d){return{value:B.id,label:B.title}}),console.log("table_data"),console.log(P),ve(P);case 10:case"end":return v.stop()}},l)}));return function(l){return _.apply(this,arguments)}}()).catch(function(_){console.log(_)})},[]);var xe=function(l){l.file.status!=="uploading"&&(l.file.status=="removed"&&A(""),l.file.status==="done"&&(0,ee.y)(l).then(function(i){console.log("base64String"),console.log(i),A(i)}),l.file.status==="error"&&J.ZP.error("".concat(l.file.name," file upload failed.")))},Pe=(0,a.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[(0,a.jsx)(Y.Z,{}),(0,a.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,a.jsxs)(h._z,{children:[(0,a.jsxs)(Q.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,a.jsx)(y.Z,{flex:"auto"}),(0,a.jsx)(y.Z,{flex:"100px",children:(0,a.jsxs)(X.ZP,{type:"primary",onClick:function(){M.history.push("/admin-app/destinations/new")},style:{marginBlockEnd:15},children:[(0,a.jsx)(Y.Z,{})," New"]},"primary")})]}),(0,a.jsxs)(s.A,{layout:"vertical",grid:!0,form:W,initialValues:te,params:{destination_id:T},request:m()(e()().mark(function _(){var l,i=arguments;return e()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(l=i.length>0&&i[0]!==void 0?i[0]:{},console.log("proform-params"),console.log(l),(l==null?void 0:l.destination_id)!=0){u.next=5;break}return u.abrupt("return");case 5:return u.next=7,(0,q.p)(2e3);case 7:return u.next=9,(0,M.request)("/api/destinations/"+(l==null?void 0:l.destination_id),{method:"GET"}).then(function(){var v=m()(e()().mark(function B(d){var z,F,S,w,$,G;return e()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return console.log("api_response"),console.log(d),A(d==null||(z=d.data)===null||z===void 0?void 0:z.image_url),L.abrupt("return",p()(p()({},te),{},{title:d==null||(F=d.data)===null||F===void 0?void 0:F.title,description:d==null||(S=d.data)===null||S===void 0?void 0:S.description,image_url:d==null||(w=d.data)===null||w===void 0?void 0:w.image_url,accommodations:d==null||($=d.data)===null||$===void 0?void 0:$.accommodations.map(function(H){return{accommodation:H.id}}),attractions:d==null||(G=d.data)===null||G===void 0?void 0:G.attractions.map(function(H){return{attraction:H.id}})}));case 4:case"end":return L.stop()}},B)}));return function(B){return v.apply(this,arguments)}}()).catch(function(v){console.log(v)});case 9:return u.abrupt("return",u.sent);case 10:case"end":return u.stop()}},_)})),onFinish:function(){var _=m()(e()().mark(function l(i){return e()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return console.log(i),u.next=3,(0,q.p)(1e3);case 3:return i.image=E,i.destination_id=T,u.next=7,me(i);case 7:case"end":return u.stop()}},l)}));return function(l){return _.apply(this,arguments)}}(),submitter:{render:function(l,i){return(0,a.jsx)(K.S,{children:i})}},children:[(0,a.jsx)(b.Z,{title:"Destination Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(l){return console.log(l)},children:(0,a.jsxs)(Q.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,a.jsx)(y.Z,{span:10,children:(0,a.jsxs)(s.A.Group,{size:24,children:[(0,a.jsx)(y.Z,{span:24,children:(0,a.jsx)(de.Z,{width:"100%",height:200,src:E})}),(0,a.jsx)(y.Z,{span:24,style:{textAlign:"center"},children:(0,a.jsx)(s.A.Item,{name:"image",getValueFromEvent:ee.h,children:(0,a.jsx)(ce.Z,{name:"image",onChange:xe,maxCount:1,children:(0,a.jsx)(X.ZP,{type:"primary",icon:(0,a.jsx)(_e.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(l){},children:"Change Image"})})})})]})}),(0,a.jsx)(y.Z,{span:14,children:(0,a.jsxs)(s.A.Group,{size:24,children:[(0,a.jsx)(k.Z,{name:"title",label:"Title",placeholder:"Type destination title",fieldProps:{prefix:(0,a.jsx)(ue.Z,{}),onChange:function(l){console.log("e.target.value"),console.log(l.target.value)}},colProps:{xs:24,sm:24,md:24,lg:24,xl:24}}),(0,a.jsx)(se.Z,{name:"description",label:"Description",placeholder:"Share a little details regarding the destination. ",colProps:{xs:24,sm:24,md:24,lg:24,xl:24},fieldProps:{size:"middle"}})]})})]})}),(0,a.jsx)(b.Z,{title:"Accommodations Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"default",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(l){return console.log(l)},children:(0,a.jsx)(s.A.Group,{title:"Accommodations",size:24,children:(0,a.jsx)(N.u,{name:"accommodations",min:1,copyIconProps:{tooltipText:"Copy this accommodation"},deleteIconProps:{tooltipText:"Delete this accommodation"},creatorButtonProps:{creatorButtonText:"Add New Accommodation"},children:(0,a.jsx)(s.A.Group,{size:24,children:(0,a.jsx)(V.Z,{name:"accommodation",label:"Name",showSearch:!0,options:ge,debounceTime:300,placeholder:"Please Select Accommodation",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})}),(0,a.jsx)(b.Z,{title:"Attractions Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"default",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(l){return console.log(l)},children:(0,a.jsx)(s.A.Group,{title:"Attractions",size:24,children:(0,a.jsx)(N.u,{name:"attractions",min:1,copyIconProps:{tooltipText:"Copy this attraction"},deleteIconProps:{tooltipText:"Delete this attraction"},creatorButtonProps:{creatorButtonText:"Add New Attraction"},children:(0,a.jsx)(s.A.Group,{size:24,children:(0,a.jsx)(V.Z,{name:"attraction",label:"Name",showSearch:!0,options:fe,debounceTime:300,placeholder:"Please Select Attraction",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})})]})]})};f.default=pe}}]);
