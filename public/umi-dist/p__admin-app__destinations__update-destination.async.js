"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7589],{57457:function(Be,F,n){n.r(F);var le=n(97857),G=n.n(le),re=n(5574),P=n.n(re),ie=n(15009),d=n.n(ie),se=n(99289),h=n.n(se),de=n(6110),v=n(34994),ce=n(2236),I=n(93410),_e=n(5966),ue=n(90672),z=n(55895),w=n(64317),H=n(2453),me=n(53025),W=n(71230),M=n(15746),N=n(14726),pe=n(55060),ge=n(66476),V=n(51042),he=n(88484),m=n(67294),f=n(35312),Ie=n(49790),J=n(16801),Q=n(58547),ve=n(41673),fe=n(92357),o=n(85893),X={title:"",description:"",image_url:"",accommodations:"",attractions:""},Ee=function(){var Y=h()(d()().mark(function C(e){var E,T;return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",e),console.log("values"),console.log(e),E=new FormData,console.log("formData - before"),console.log(E),E.append("title",e==null?void 0:e.title),E.append("description",e==null?void 0:e.description),E.append("image",e==null?void 0:e.image),console.log("formData - after"),console.log(E),c.prev=12,T={id:e==null?void 0:e.destination_id,title:e==null?void 0:e.title,description:e==null?void 0:e.description,image:e==null?void 0:e.image,accommodations:e==null?void 0:e.accommodations.map(function(_){return _==null?void 0:_.accommodation}),attractions:e==null?void 0:e.attractions.map(function(_){return _==null?void 0:_.attraction}),latitude:e==null?void 0:e.latitude,longitude:e==null?void 0:e.longitude},c.next=16,(0,f.request)("/api/destinations/"+(e==null?void 0:e.destination_id),{method:"PUT",data:T}).then(function(){var _=h()(d()().mark(function j(g){var O,x;return d()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:console.log("api_response"),console.log(g),(g==null||(O=g.data)===null||O===void 0?void 0:O.id)>0&&(H.ZP.success("Submitted successfully"),f.history.push("/admin-app/destinations/edit/"+(g==null||(x=g.data)===null||x===void 0?void 0:x.id)));case 3:case"end":return A.stop()}},j)}));return function(j){return _.apply(this,arguments)}}()).catch(function(_){console.log(_)});case 16:return c.abrupt("return",c.sent);case 19:c.prev=19,c.t0=c.catch(12),console.log("api_response - error"),console.log(c.t0);case 23:return c.abrupt("return",!0);case 24:case"end":return c.stop()}},C,null,[[12,19]])}));return function(e){return Y.apply(this,arguments)}}(),De=function(){var C=(0,f.useParams)(),e=me.Z.useForm(),E=P()(e,1),T=E[0],k=(0,m.useState)("http://vu.project.localhost.com/images/default/placeholder.jpg"),c=P()(k,2),_=c[0],j=c[1],g=(0,m.useState)(0),O=P()(g,2),x=O[0],q=O[1],A=(0,m.useState)([]),ee=P()(A,2),Pe=ee[0],Me=ee[1],je=(0,m.useState)([]),oe=P()(je,2),Oe=oe[0],xe=oe[1],Ae=(0,m.useState)(""),te=P()(Ae,2),r=te[0],ne=te[1],Ce=(0,m.useState)(""),ae=P()(Ce,2),We=ae[0],ye=ae[1];(0,m.useEffect)(function(){q(C.id)},[]),(0,m.useEffect)(function(){},[r]),(0,m.useEffect)(function(){return(0,f.request)("/api/accommodations",{params:{page:1,per_page:1e3,order_by:"id",order:"asc"}}).then(function(){var i=h()(d()().mark(function t(a){var p;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:console.log("api_response"),console.log(a),console.log("api_response.data"),console.log(a.data),console.log("api_response.data.data"),console.log(a.data.data),p=a.data.data.map(function(D,l){return{value:D.id,label:D.title}}),console.log("table_data"),console.log(p),Me(p);case 10:case"end":return u.stop()}},t)}));return function(t){return i.apply(this,arguments)}}()).catch(function(i){console.log(i)})},[]),(0,m.useEffect)(function(){return(0,f.request)("/api/attractions",{params:{page:1,per_page:1e3,order_by:"id",order:"asc"}}).then(function(){var i=h()(d()().mark(function t(a){var p;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:console.log("api_response"),console.log(a),console.log("api_response.data"),console.log(a.data),console.log("api_response.data.data"),console.log(a.data.data),p=a.data.data.map(function(D,l){return{value:D.id,label:D.title}}),console.log("table_data"),console.log(p),xe(p);case 10:case"end":return u.stop()}},t)}));return function(t){return i.apply(this,arguments)}}()).catch(function(i){console.log(i)})},[]);var Te=function(t){t.file.status!=="uploading"&&(t.file.status=="removed"&&j(""),t.file.status==="done"&&(0,Q.y)(t).then(function(a){console.log("base64String"),console.log(a),j(a)}),t.file.status==="error"&&H.ZP.error("".concat(t.file.name," file upload failed.")))},Ue=(0,o.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[(0,o.jsx)(V.Z,{}),(0,o.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return console.log("googleMapPosition - test "),console.log(r),(0,o.jsxs)(de._z,{children:[(0,o.jsxs)(W.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,o.jsx)(M.Z,{flex:"auto"}),(0,o.jsx)(M.Z,{flex:"100px",children:(0,o.jsxs)(N.ZP,{type:"primary",onClick:function(){f.history.push("/admin-app/destinations/new")},style:{marginBlockEnd:15},children:[(0,o.jsx)(V.Z,{})," New"]},"primary")})]}),(0,o.jsxs)(v.A,{layout:"vertical",grid:!0,form:T,initialValues:X,params:{destination_id:x},request:h()(d()().mark(function i(){var t,a=arguments;return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=a.length>0&&a[0]!==void 0?a[0]:{},console.log("proform-params"),console.log(t),(t==null?void 0:t.destination_id)!=0){s.next=5;break}return s.abrupt("return");case 5:return s.next=7,(0,J.p)(2e3);case 7:return s.next=9,(0,f.request)("/api/destinations/"+(t==null?void 0:t.destination_id),{method:"GET"}).then(function(){var u=h()(d()().mark(function D(l){var y,U,b,R,K,L,S,Z;return d()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return console.log("api_response"),console.log(l),j(l==null||(y=l.data)===null||y===void 0?void 0:y.image_url),ne({lat:l==null||(U=l.data)===null||U===void 0?void 0:U.latitude,lng:l==null||(b=l.data)===null||b===void 0?void 0:b.longitude}),B.abrupt("return",G()(G()({},X),{},{title:l==null||(R=l.data)===null||R===void 0?void 0:R.title,description:l==null||(K=l.data)===null||K===void 0?void 0:K.description,image_url:l==null||(L=l.data)===null||L===void 0?void 0:L.image_url,accommodations:l==null||(S=l.data)===null||S===void 0?void 0:S.accommodations.map(function($){return{accommodation:$.id}}),attractions:l==null||(Z=l.data)===null||Z===void 0?void 0:Z.attractions.map(function($){return{attraction:$.id}})}));case 5:case"end":return B.stop()}},D)}));return function(D){return u.apply(this,arguments)}}()).catch(function(u){console.log(u)});case 9:return s.abrupt("return",s.sent);case 10:case"end":return s.stop()}},i)})),onFinish:function(){var i=h()(d()().mark(function t(a){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log(a),s.next=3,(0,J.p)(1e3);case 3:return a.image=_,a.destination_id=x,a.latitude=r==null?void 0:r.lat,a.longitude=r==null?void 0:r.lng,s.next=9,Ee(a);case 9:case"end":return s.stop()}},t)}));return function(t){return i.apply(this,arguments)}}(),submitter:{render:function(t,a){return(0,o.jsx)(ce.S,{children:a})}},children:[(0,o.jsxs)(I.Z,{title:"Destination Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(t){return console.log(t)},children:[(0,o.jsxs)(W.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,o.jsx)(M.Z,{span:10,children:(0,o.jsxs)(v.A.Group,{size:24,children:[(0,o.jsx)(M.Z,{span:24,children:(0,o.jsx)(pe.Z,{width:"100%",height:200,src:_})}),(0,o.jsx)(M.Z,{span:24,style:{textAlign:"center"},children:(0,o.jsx)(v.A.Item,{name:"image",getValueFromEvent:Q.h,children:(0,o.jsx)(ge.Z,{name:"image",onChange:Te,maxCount:1,children:(0,o.jsx)(N.ZP,{type:"primary",icon:(0,o.jsx)(he.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(t){},children:"Change Image"})})})})]})}),(0,o.jsx)(M.Z,{span:14,children:(0,o.jsxs)(v.A.Group,{size:24,children:[(0,o.jsx)(_e.Z,{name:"title",label:"Title",placeholder:"Type destination title",fieldProps:{onChange:function(t){console.log("e.target.value"),console.log(t.target.value)}},colProps:{xs:24,sm:24,md:24,lg:24,xl:24}}),(0,o.jsx)(ue.Z,{name:"description",label:"Description",placeholder:"Share a little details regarding the destination. ",colProps:{xs:24,sm:24,md:24,lg:24,xl:24},fieldProps:{size:"middle"}})]})})]}),(0,o.jsx)(W.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:(0,o.jsxs)(M.Z,{span:24,children:[(0,o.jsx)(fe.Z,{latitude:r.lat,longitude:r.lng}),(0,o.jsx)(ve.Z,{initialCoords:{lat:parseFloat(r.lat),lng:parseFloat(r.lng)},onPositionChange:function(t){console.log("New marker position:",t),ne(t)}})]})})]}),(0,o.jsx)(I.Z,{title:"Accommodations Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"default",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(t){return console.log(t)},children:(0,o.jsx)(v.A.Group,{title:"Accommodations",size:24,children:(0,o.jsx)(z.u,{name:"accommodations",min:1,copyIconProps:{tooltipText:"Copy this accommodation"},deleteIconProps:{tooltipText:"Delete this accommodation"},creatorButtonProps:{creatorButtonText:"Add New Accommodation"},children:(0,o.jsx)(v.A.Group,{size:24,children:(0,o.jsx)(w.Z,{name:"accommodation",label:"Name",showSearch:!0,options:Pe,debounceTime:300,placeholder:"Please Select Accommodation",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})}),(0,o.jsx)(I.Z,{title:"Attractions Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"default",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(t){return console.log(t)},children:(0,o.jsx)(v.A.Group,{title:"Attractions",size:24,children:(0,o.jsx)(z.u,{name:"attractions",min:1,copyIconProps:{tooltipText:"Copy this attraction"},deleteIconProps:{tooltipText:"Delete this attraction"},creatorButtonProps:{creatorButtonText:"Add New Attraction"},children:(0,o.jsx)(v.A.Group,{size:24,children:(0,o.jsx)(w.Z,{name:"attraction",label:"Name",showSearch:!0,options:Oe,debounceTime:300,placeholder:"Please Select Attraction",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})})]})]})};F.default=De}}]);
