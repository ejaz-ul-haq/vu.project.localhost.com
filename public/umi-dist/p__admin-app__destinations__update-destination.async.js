"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[589],{51042:function(T,f,t){var x=t(1413),p=t(67294),c=t(42110),r=t(91146),n=function(m,_){return p.createElement(r.Z,(0,x.Z)((0,x.Z)({},m),{},{ref:_,icon:c.Z}))},e=p.forwardRef(n);f.Z=e},90672:function(T,f,t){var x=t(1413),p=t(91),c=t(67294),r=t(72381),n=t(85893),e=["fieldProps","proFieldProps"],D=function(_,s){var L=_.fieldProps,B=_.proFieldProps,z=(0,p.Z)(_,e);return(0,n.jsx)(r.Z,(0,x.Z)({ref:s,valueType:"textarea",fieldProps:L,proFieldProps:B},z))};f.Z=c.forwardRef(D)},41673:function(T,f,t){var x=t(5574),p=t.n(x),c=t(67294),r=t(85893),n="AIzaSyC4pW0R1O6un6tUhogR0ZKeSRLQoOCvUxU",e=function(m){var _=m.initialCoords,s=m.onPositionChange,L=(0,c.useState)(_),B=p()(L,2),z=B[0],H=B[1],b=(0,c.useRef)(null);(0,c.useEffect)(function(){if(console.log("initialCoords - from - inner"),console.log(_),_.length==0){console.log("initialCoords.length - case - 01");return}else console.log("initialCoords.length - case - 02");var k=function(){var h=document.createElement("script");return h.src="https://maps.googleapis.com/maps/api/js?key=".concat(n,"&callback=initMap&libraries=geometry,marker"),h.async=!0,h.defer=!0,window.initMap=K,document.head.appendChild(h),h.onerror=function(){console.error("Error loading Google Maps script")},function(){h&&document.head.removeChild(h)}};window.google?(console.log("initialCoords - from - inner - case 02"),K()):(console.log("initialCoords - from - inner - case 01"),k())},[_]);var K=function(){if(b.current){var F=new window.google.maps.Map(b.current,{center:_,zoom:12}),h=new window.google.maps.Marker({position:_,map:F,draggable:!0});h.addListener("dragend",function(){var j={lat:h.getPosition().lat(),lng:h.getPosition().lng()};console.log("Marker dragged to:",j),H(j),s&&s(j)})}};return(0,r.jsx)("div",{style:{width:"100%",height:"400px"},ref:b})};f.Z=e},58547:function(T,f,t){t.d(f,{h:function(){return p},y:function(){return c}});var x=t(67294),p=function(n){return console.log("Upload event:",n),Array.isArray(n)?n:n&&n.fileList},c=function(n){return new Promise(function(e,D){var m=new FileReader;m.readAsDataURL(n.file.originFileObj),m.onload=function(){var _=m.result;console.log("DataURL: test",_),e(_)},m.onerror=function(_){return D(_)}})}},16801:function(T,f,t){t.d(f,{p:function(){return x}});var x=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(r){setTimeout(function(){r(!0)},c)})}},49790:function(T,f,t){var x=t(67294),p=t(4393),c=t(71230),r=t(15746),n=t(99559),e=t(85893),D=function(_){var s=_.active;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(p.Z,{style:{marginBlockEnd:15},children:(0,e.jsxs)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsxs)(r.Z,{span:6,children:[(0,e.jsx)(n.Z.Image,{active:s,style:{width:"210px",maxWidth:"240px",height:"200px",marginBlockEnd:10}}),(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Button,{active:s,style:{width:"140px",maxWidth:"200px",height:"35px",marginLeft:"20px"}})})]}),(0,e.jsxs)(r.Z,{span:18,children:[(0,e.jsxs)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsxs)(r.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(r.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(r.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]})]}),(0,e.jsx)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:(0,e.jsxs)(r.Z,{span:24,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]})})]})]})}),(0,e.jsx)(p.Z,{style:{marginBlockEnd:15},children:(0,e.jsx)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:(0,e.jsx)(r.Z,{span:24,children:(0,e.jsxs)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsxs)(r.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(r.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(r.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]})]})})})}),(0,e.jsx)(p.Z,{style:{marginBlockEnd:15},children:(0,e.jsx)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:(0,e.jsx)(r.Z,{span:24,children:(0,e.jsxs)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsxs)(r.Z,{span:12,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(r.Z,{span:12,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]})]})})})}),(0,e.jsx)(p.Z,{children:(0,e.jsx)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:(0,e.jsx)(r.Z,{span:24,children:(0,e.jsxs)(c.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsxs)(r.Z,{span:12,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(r.Z,{span:12,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:s,size:"default",block:!0,style:{marginBlockEnd:20}})]})]})})})})]})};f.Z=D},57457:function(T,f,t){t.r(f);var x=t(97857),p=t.n(x),c=t(5574),r=t.n(c),n=t(15009),e=t.n(n),D=t(99289),m=t.n(D),_=t(6110),s=t(34994),L=t(2236),B=t(58128),z=t(5966),H=t(90672),b=t(55895),K=t(64317),k=t(2453),F=t(53025),h=t(71230),j=t(15746),ne=t(14726),pe=t(55060),ge=t(66476),oe=t(51042),he=t(88484),Ee=t(87547),y=t(67294),I=t(35312),ye=t(49790),ae=t(16801),le=t(58547),fe=t(41673),a=t(85893),re={title:"",description:"",image_url:"",accommodations:"",attractions:""},ve=function(){var se=m()(e()().mark(function w(o){var C,$;return e()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",o),console.log("values"),console.log(o),C=new FormData,console.log("formData - before"),console.log(C),C.append("title",o==null?void 0:o.title),C.append("description",o==null?void 0:o.description),C.append("image",o==null?void 0:o.image),console.log("formData - after"),console.log(C),E.prev=12,$={id:o==null?void 0:o.destination_id,title:o==null?void 0:o.title,description:o==null?void 0:o.description,image:o==null?void 0:o.image,accommodations:o==null?void 0:o.accommodations.map(function(v){return v==null?void 0:v.accommodation}),attractions:o==null?void 0:o.attractions.map(function(v){return v==null?void 0:v.attraction}),latitude:o==null?void 0:o.latitude,longitude:o==null?void 0:o.longitude},E.next=16,(0,I.request)("/api/destinations/"+(o==null?void 0:o.destination_id),{method:"PUT",data:$}).then(function(){var v=m()(e()().mark(function R(M){var U,W;return e()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:console.log("api_response"),console.log(M),(M==null||(U=M.data)===null||U===void 0?void 0:U.id)>0&&(k.ZP.success("Submitted successfully"),I.history.push("/admin-app/destinations/edit/"+(M==null||(W=M.data)===null||W===void 0?void 0:W.id)));case 3:case"end":return S.stop()}},R)}));return function(R){return v.apply(this,arguments)}}()).catch(function(v){console.log(v)});case 16:return E.abrupt("return",E.sent);case 19:E.prev=19,E.t0=E.catch(12),console.log("api_response - error"),console.log(E.t0);case 23:return E.abrupt("return",!0);case 24:case"end":return E.stop()}},w,null,[[12,19]])}));return function(o){return se.apply(this,arguments)}}(),xe=function(){var w=(0,I.useParams)(),o=F.Z.useForm(),C=r()(o,1),$=C[0],ie=(0,y.useState)("http://vu.project.localhost.com/images/default/placeholder.jpg"),E=r()(ie,2),v=E[0],R=E[1],M=(0,y.useState)(0),U=r()(M,2),W=U[0],de=U[1],S=(0,y.useState)([]),ce=r()(S,2),je=ce[0],Pe=ce[1],De=(0,y.useState)([]),_e=r()(De,2),Me=_e[0],Oe=_e[1],Ze=(0,y.useState)(""),ue=r()(Ze,2),O=ue[0],me=ue[1];(0,y.useEffect)(function(){de(w.id)},[]),(0,y.useEffect)(function(){return(0,I.request)("/api/accommodations",{params:{page:1,per_page:1e3,order_by:"id",order:"asc"}}).then(function(){var u=m()(e()().mark(function l(d){var Z;return e()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:console.log("api_response"),console.log(d),console.log("api_response.data"),console.log(d.data),console.log("api_response.data.data"),console.log(d.data.data),Z=d.data.data.map(function(A,i){return{value:A.id,label:A.title}}),console.log("table_data"),console.log(Z),Pe(Z);case 10:case"end":return P.stop()}},l)}));return function(l){return u.apply(this,arguments)}}()).catch(function(u){console.log(u)})},[]),(0,y.useEffect)(function(){return(0,I.request)("/api/attractions",{params:{page:1,per_page:1e3,order_by:"id",order:"asc"}}).then(function(){var u=m()(e()().mark(function l(d){var Z;return e()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:console.log("api_response"),console.log(d),console.log("api_response.data"),console.log(d.data),console.log("api_response.data.data"),console.log(d.data.data),Z=d.data.data.map(function(A,i){return{value:A.id,label:A.title}}),console.log("table_data"),console.log(Z),Oe(Z);case 10:case"end":return P.stop()}},l)}));return function(l){return u.apply(this,arguments)}}()).catch(function(u){console.log(u)})},[]);var Be=function(l){l.file.status!=="uploading"&&(l.file.status=="removed"&&R(""),l.file.status==="done"&&(0,le.y)(l).then(function(d){console.log("base64String"),console.log(d),R(d)}),l.file.status==="error"&&k.ZP.error("".concat(l.file.name," file upload failed.")))},Ce=(0,a.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[(0,a.jsx)(oe.Z,{}),(0,a.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return console.log("googleMapPosition - test "),console.log(O),(0,a.jsxs)(_._z,{children:[(0,a.jsxs)(h.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,a.jsx)(j.Z,{flex:"auto"}),(0,a.jsx)(j.Z,{flex:"100px",children:(0,a.jsxs)(ne.ZP,{type:"primary",onClick:function(){I.history.push("/admin-app/destinations/new")},style:{marginBlockEnd:15},children:[(0,a.jsx)(oe.Z,{})," New"]},"primary")})]}),(0,a.jsxs)(s.A,{layout:"vertical",grid:!0,form:$,initialValues:re,params:{destination_id:W},request:m()(e()().mark(function u(){var l,d=arguments;return e()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(l=d.length>0&&d[0]!==void 0?d[0]:{},console.log("proform-params"),console.log(l),(l==null?void 0:l.destination_id)!=0){g.next=5;break}return g.abrupt("return");case 5:return g.next=7,(0,ae.p)(2e3);case 7:return g.next=9,(0,I.request)("/api/destinations/"+(l==null?void 0:l.destination_id),{method:"GET"}).then(function(){var P=m()(e()().mark(function A(i){var N,V,Q,Y,J,X,q,ee;return e()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return console.log("api_response"),console.log(i),R(i==null||(N=i.data)===null||N===void 0?void 0:N.image_url),me({lat:i==null||(V=i.data)===null||V===void 0?void 0:V.latitude,lng:i==null||(Q=i.data)===null||Q===void 0?void 0:Q.longitude}),G.abrupt("return",p()(p()({},re),{},{title:i==null||(Y=i.data)===null||Y===void 0?void 0:Y.title,description:i==null||(J=i.data)===null||J===void 0?void 0:J.description,image_url:i==null||(X=i.data)===null||X===void 0?void 0:X.image_url,accommodations:i==null||(q=i.data)===null||q===void 0?void 0:q.accommodations.map(function(te){return{accommodation:te.id}}),attractions:i==null||(ee=i.data)===null||ee===void 0?void 0:ee.attractions.map(function(te){return{attraction:te.id}})}));case 5:case"end":return G.stop()}},A)}));return function(A){return P.apply(this,arguments)}}()).catch(function(P){console.log(P)});case 9:return g.abrupt("return",g.sent);case 10:case"end":return g.stop()}},u)})),onFinish:function(){var u=m()(e()().mark(function l(d){return e()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return console.log(d),g.next=3,(0,ae.p)(1e3);case 3:return d.image=v,d.destination_id=W,d.latitude=O==null?void 0:O.lat,d.longitude=O==null?void 0:O.lng,g.next=9,ve(d);case 9:case"end":return g.stop()}},l)}));return function(l){return u.apply(this,arguments)}}(),submitter:{render:function(l,d){return(0,a.jsx)(L.S,{children:d})}},children:[(0,a.jsxs)(B.Z,{title:"Destination Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(l){return console.log(l)},children:[(0,a.jsxs)(h.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,a.jsx)(j.Z,{span:10,children:(0,a.jsxs)(s.A.Group,{size:24,children:[(0,a.jsx)(j.Z,{span:24,children:(0,a.jsx)(pe.Z,{width:"100%",height:200,src:v})}),(0,a.jsx)(j.Z,{span:24,style:{textAlign:"center"},children:(0,a.jsx)(s.A.Item,{name:"image",getValueFromEvent:le.h,children:(0,a.jsx)(ge.Z,{name:"image",onChange:Be,maxCount:1,children:(0,a.jsx)(ne.ZP,{type:"primary",icon:(0,a.jsx)(he.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(l){},children:"Change Image"})})})})]})}),(0,a.jsx)(j.Z,{span:14,children:(0,a.jsxs)(s.A.Group,{size:24,children:[(0,a.jsx)(z.Z,{name:"title",label:"Title",placeholder:"Type destination title",fieldProps:{prefix:(0,a.jsx)(Ee.Z,{}),onChange:function(l){console.log("e.target.value"),console.log(l.target.value)}},colProps:{xs:24,sm:24,md:24,lg:24,xl:24}}),(0,a.jsx)(H.Z,{name:"description",label:"Description",placeholder:"Share a little details regarding the destination. ",colProps:{xs:24,sm:24,md:24,lg:24,xl:24},fieldProps:{size:"middle"}})]})})]}),(0,a.jsx)(h.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:(0,a.jsx)(j.Z,{span:24,children:(0,a.jsx)(fe.Z,{initialCoords:{lat:parseFloat(O.lat),lng:parseFloat(O.lng)},onPositionChange:function(l){console.log("New marker position:",l),me(l)}})})})]}),(0,a.jsx)(B.Z,{title:"Accommodations Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"default",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(l){return console.log(l)},children:(0,a.jsx)(s.A.Group,{title:"Accommodations",size:24,children:(0,a.jsx)(b.u,{name:"accommodations",min:1,copyIconProps:{tooltipText:"Copy this accommodation"},deleteIconProps:{tooltipText:"Delete this accommodation"},creatorButtonProps:{creatorButtonText:"Add New Accommodation"},children:(0,a.jsx)(s.A.Group,{size:24,children:(0,a.jsx)(K.Z,{name:"accommodation",label:"Name",showSearch:!0,options:je,debounceTime:300,placeholder:"Please Select Accommodation",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})}),(0,a.jsx)(B.Z,{title:"Attractions Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"default",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(l){return console.log(l)},children:(0,a.jsx)(s.A.Group,{title:"Attractions",size:24,children:(0,a.jsx)(b.u,{name:"attractions",min:1,copyIconProps:{tooltipText:"Copy this attraction"},deleteIconProps:{tooltipText:"Delete this attraction"},creatorButtonProps:{creatorButtonText:"Add New Attraction"},children:(0,a.jsx)(s.A.Group,{size:24,children:(0,a.jsx)(K.Z,{name:"attraction",label:"Name",showSearch:!0,options:Me,debounceTime:300,placeholder:"Please Select Attraction",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})})]})]})};f.default=xe}}]);
