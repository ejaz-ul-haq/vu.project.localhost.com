"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[360],{51042:function(I,h,t){var f=t(1413),u=t(67294),i=t(42110),s=t(91146),n=function(m,g){return u.createElement(s.Z,(0,f.Z)((0,f.Z)({},m),{},{ref:g,icon:i.Z}))},e=u.forwardRef(n);h.Z=e},90672:function(I,h,t){var f=t(1413),u=t(91),i=t(67294),s=t(72381),n=t(85893),e=["fieldProps","proFieldProps"],x=function(g,o){var b=g.fieldProps,K=g.proFieldProps,k=(0,u.Z)(g,e);return(0,n.jsx)(s.Z,(0,f.Z)({ref:o,valueType:"textarea",fieldProps:b,proFieldProps:K},k))};h.Z=i.forwardRef(x)},58547:function(I,h,t){t.d(h,{h:function(){return u},y:function(){return i}});var f=t(67294),u=function(n){return console.log("Upload event:",n),Array.isArray(n)?n:n&&n.fileList},i=function(n){return new Promise(function(e,x){var m=new FileReader;m.readAsDataURL(n.file.originFileObj),m.onload=function(){var g=m.result;console.log("DataURL: test",g),e(g)},m.onerror=function(g){return x(g)}})}},16801:function(I,h,t){t.d(h,{p:function(){return f}});var f=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(s){setTimeout(function(){s(!0)},i)})}},49790:function(I,h,t){var f=t(67294),u=t(4393),i=t(71230),s=t(15746),n=t(99559),e=t(85893),x=function(g){var o=g.active;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(u.Z,{style:{marginBlockEnd:15},children:(0,e.jsxs)(i.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsxs)(s.Z,{span:6,children:[(0,e.jsx)(n.Z.Image,{active:o,style:{width:"210px",maxWidth:"240px",height:"200px",marginBlockEnd:10}}),(0,e.jsx)(s.Z,{span:24,children:(0,e.jsx)(n.Z.Button,{active:o,style:{width:"140px",maxWidth:"200px",height:"35px",marginLeft:"20px"}})})]}),(0,e.jsxs)(s.Z,{span:18,children:[(0,e.jsxs)(i.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsxs)(s.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(s.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(s.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}})]})]}),(0,e.jsx)(i.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:(0,e.jsxs)(s.Z,{span:24,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}})]})})]})]})}),(0,e.jsx)(u.Z,{style:{marginBlockEnd:15},children:(0,e.jsx)(i.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:(0,e.jsx)(s.Z,{span:24,children:(0,e.jsxs)(i.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsxs)(s.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(s.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(s.Z,{span:8,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}})]})]})})})}),(0,e.jsx)(u.Z,{style:{marginBlockEnd:15},children:(0,e.jsx)(i.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:(0,e.jsx)(s.Z,{span:24,children:(0,e.jsxs)(i.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsxs)(s.Z,{span:12,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(s.Z,{span:12,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}}),(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}})]})]})})})}),(0,e.jsx)(u.Z,{children:(0,e.jsx)(i.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:(0,e.jsx)(s.Z,{span:24,children:(0,e.jsxs)(i.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsxs)(s.Z,{span:12,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}})]}),(0,e.jsxs)(s.Z,{span:12,children:[(0,e.jsx)(n.Z,{paragraph:!1,title:{width:80},style:{marginBlockEnd:5}}),(0,e.jsx)(n.Z.Input,{active:o,size:"default",block:!0,style:{marginBlockEnd:20}})]})]})})})})]})};h.Z=x},8351:function(I,h,t){t.r(h);var f=t(97857),u=t.n(f),i=t(5574),s=t.n(i),n=t(15009),e=t.n(n),x=t(99289),m=t.n(x),g=t(6110),o=t(34994),b=t(2236),K=t(58128),k=t(5966),ne=t(90672),ae=t(64317),H=t(2453),se=t(53025),G=t(71230),D=t(15746),V=t(14726),le=t(55060),oe=t(66476),N=t(51042),re=t(88484),ie=t(87547),A=t(67294),Z=t(35312),pe=t(49790),Y=t(16801),J=t(58547),l=t(85893),Q={title:"",description:"",image_url:"",destination_id:""},de=function(){var X=m()(e()().mark(function U(a){var j,W;return e()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",a),console.log("values"),console.log(a),j=new FormData,console.log("formData - before"),console.log(j),j.append("title",a==null?void 0:a.title),j.append("description",a==null?void 0:a.description),j.append("image",a==null?void 0:a.image),console.log("formData - after"),console.log(j),p.prev=12,W={id:a==null?void 0:a.accommodation_id,title:a==null?void 0:a.title,description:a==null?void 0:a.description,destination_id:a==null?void 0:a.destination_id,image:a==null?void 0:a.image},p.next=16,(0,Z.request)("/api/accommodations/"+(a==null?void 0:a.accommodation_id),{method:"PUT",data:W}).then(function(){var O=m()(e()().mark(function B(v){var M,y;return e()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:console.log("api_response - PUT accommodation"),console.log(v),(v==null||(M=v.data)===null||M===void 0?void 0:M.id)>0&&(H.ZP.success("Submitted successfully"),Z.history.push("/admin-app/accommodations/edit/"+(v==null||(y=v.data)===null||y===void 0?void 0:y.id)));case 3:case"end":return T.stop()}},B)}));return function(B){return O.apply(this,arguments)}}()).catch(function(O){console.log(O)});case 16:return p.abrupt("return",p.sent);case 19:p.prev=19,p.t0=p.catch(12),console.log("api_response - error"),console.log(p.t0);case 23:return p.abrupt("return",!0);case 24:case"end":return p.stop()}},U,null,[[12,19]])}));return function(a){return X.apply(this,arguments)}}(),_e=function(){var U=(0,Z.useParams)(),a=se.Z.useForm(),j=s()(a,1),W=j[0],q=(0,A.useState)("https://vu.project.wpvisions.com/images/default/placeholder.jpg"),p=s()(q,2),O=p[0],B=p[1],v=(0,A.useState)(0),M=s()(v,2),y=M[0],ee=M[1],T=(0,A.useState)([]),te=s()(T,2),ce=te[0],ue=te[1];(0,A.useEffect)(function(){ee(U.id)},[]),(0,A.useEffect)(function(){return(0,Z.request)("/api/destinations",{params:{page:1,per_page:1e3,order_by:"id",order:"asc"}}).then(function(){var E=m()(e()().mark(function r(d){var C;return e()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:console.log("api_response"),console.log(d),console.log("api_response.data"),console.log(d.data),console.log("api_response.data.data"),console.log(d.data.data),C=d.data.data.map(function(R,_){return{value:R.id,label:R.title}}),console.log("table_data"),console.log(C),ue(C);case 10:case"end":return P.stop()}},r)}));return function(r){return E.apply(this,arguments)}}()).catch(function(E){console.log(E)})},[]);var me=function(r){r.file.status!=="uploading"&&(r.file.status=="removed"&&B(""),r.file.status==="done"&&(0,J.y)(r).then(function(d){console.log("base64String"),console.log(d),B(d)}),r.file.status==="error"&&H.ZP.error("".concat(r.file.name," file upload failed.")))},ge=(0,l.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[(0,l.jsx)(N.Z,{}),(0,l.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,l.jsxs)(g._z,{children:[(0,l.jsxs)(G.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,l.jsx)(D.Z,{flex:"auto"}),(0,l.jsx)(D.Z,{flex:"100px",children:(0,l.jsxs)(V.ZP,{type:"primary",onClick:function(){Z.history.push("/admin-app/accommodations/new")},style:{marginBlockEnd:15},children:[(0,l.jsx)(N.Z,{})," New"]},"primary")})]}),(0,l.jsx)(o.A,{layout:"vertical",grid:!0,form:W,initialValues:Q,params:{accommodation_id:y},request:m()(e()().mark(function E(){var r,d=arguments;return e()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r=d.length>0&&d[0]!==void 0?d[0]:{},console.log("proform-params"),console.log(r),(r==null?void 0:r.accommodation_id)!=0){c.next=5;break}return c.abrupt("return");case 5:return c.next=7,(0,Y.p)(2e3);case 7:return c.next=9,(0,Z.request)("/api/accommodations/"+(r==null?void 0:r.accommodation_id),{method:"GET"}).then(function(){var P=m()(e()().mark(function R(_){var F,z,S,$,w;return e()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return console.log("api_response"),console.log(_),B(_==null||(F=_.data)===null||F===void 0?void 0:F.image_url),L.abrupt("return",u()(u()({},Q),{},{title:_==null||(z=_.data)===null||z===void 0?void 0:z.title,description:_==null||(S=_.data)===null||S===void 0?void 0:S.description,image_url:_==null||($=_.data)===null||$===void 0?void 0:$.image_url,destination_id:_==null||(w=_.data)===null||w===void 0?void 0:w.destination_id}));case 4:case"end":return L.stop()}},R)}));return function(R){return P.apply(this,arguments)}}()).catch(function(P){console.log(P)});case 9:return c.abrupt("return",c.sent);case 10:case"end":return c.stop()}},E)})),onFinish:function(){var E=m()(e()().mark(function r(d){return e()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return console.log(d),c.next=3,(0,Y.p)(1e3);case 3:return d.image=O,d.accommodation_id=y,c.next=7,de(d);case 7:case"end":return c.stop()}},r)}));return function(r){return E.apply(this,arguments)}}(),submitter:{render:function(r,d){return(0,l.jsx)(b.S,{children:d})}},children:(0,l.jsx)(K.Z,{title:"Accommodation Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(r){return console.log(r)},children:(0,l.jsxs)(G.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,l.jsx)(D.Z,{span:10,children:(0,l.jsxs)(o.A.Group,{size:24,children:[(0,l.jsx)(D.Z,{span:24,children:(0,l.jsx)(le.Z,{width:"100%",height:200,src:O})}),(0,l.jsx)(D.Z,{span:24,style:{textAlign:"center"},children:(0,l.jsx)(o.A.Item,{name:"image",getValueFromEvent:J.h,children:(0,l.jsx)(oe.Z,{name:"image",onChange:me,maxCount:1,children:(0,l.jsx)(V.ZP,{type:"primary",icon:(0,l.jsx)(re.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(r){},children:"Change Image"})})})})]})}),(0,l.jsx)(D.Z,{span:14,children:(0,l.jsxs)(o.A.Group,{size:24,children:[(0,l.jsx)(k.Z,{name:"title",label:"Title",placeholder:"Type accommodation title",fieldProps:{prefix:(0,l.jsx)(ie.Z,{}),onChange:function(r){console.log("e.target.value"),console.log(r.target.value)}},colProps:{xs:24,sm:24,md:24,lg:24,xl:24}}),(0,l.jsx)(ne.Z,{name:"description",label:"Description",placeholder:"Share a little details regarding the accommodation. ",colProps:{xs:24,sm:24,md:24,lg:24,xl:24},fieldProps:{size:"middle"}}),(0,l.jsx)(ae.Z,{name:"destination_id",label:"Destinations",showSearch:!0,options:ce,debounceTime:300,placeholder:"Please Select Your Destination",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})]})})]})})})]})};h.default=_e}}]);
