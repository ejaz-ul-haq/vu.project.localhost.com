"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[562],{82061:function(x,d,e){var l=e(1413),a=e(67294),E=e(47046),r=e(91146),h=function(D,g){return a.createElement(r.Z,(0,l.Z)((0,l.Z)({},D),{},{ref:g,icon:E.Z}))},s=a.forwardRef(h);d.Z=s},47389:function(x,d,e){var l=e(1413),a=e(67294),E=e(27363),r=e(91146),h=function(D,g){return a.createElement(r.Z,(0,l.Z)((0,l.Z)({},D),{},{ref:g,icon:E.Z}))},s=a.forwardRef(h);d.Z=s},82114:function(x,d,e){var l=e(1413),a=e(67294),E=e(83707),r=e(91146),h=function(D,g){return a.createElement(r.Z,(0,l.Z)((0,l.Z)({},D),{},{ref:g,icon:E.Z}))},s=a.forwardRef(h);d.Z=s},51042:function(x,d,e){var l=e(1413),a=e(67294),E=e(42110),r=e(91146),h=function(D,g){return a.createElement(r.Z,(0,l.Z)((0,l.Z)({},D),{},{ref:g,icon:E.Z}))},s=a.forwardRef(h);d.Z=s},42921:function(x,d,e){e.r(d),e.d(d,{waitTime:function(){return S},waitTimePromise:function(){return Z}});var l=e(5574),a=e.n(l),E=e(15009),r=e.n(E),h=e(99289),s=e.n(h),j=e(47389),D=e(82061),g=e(51042),G=e(82114),H=e(6110),J=e(48590),Q=e(37476),O=e(35312),V=e(2453),B=e(14726),X=e(96074),A=e(67294),k=e(27484),b=e.n(k),t=e(85893),Z=function(){var L=s()(r()().mark(function c(){var p,v=arguments;return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return p=v.length>0&&v[0]!==void 0?v[0]:100,m.abrupt("return",new Promise(function(U){setTimeout(function(){U(!0)},p)}));case 2:case"end":return m.stop()}},c)}));return function(){return L.apply(this,arguments)}}(),S=function(){var L=s()(r()().mark(function c(){var p,v=arguments;return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return p=v.length>0&&v[0]!==void 0?v[0]:100,m.next=3,Z(p);case 3:case"end":return m.stop()}},c)}));return function(){return L.apply(this,arguments)}}(),q=function(){var c=(0,O.useModel)("@@initialState"),p=c.initialState,v=c.loading,w=c.refresh,m=c.setInitialState;console.log("initialState"),console.log(p),console.log("loading"),console.log(v);var U=(0,A.useState)(!1),z=a()(U,2),le=z[0],ee=z[1],K=(0,A.useRef)(),ne=(0,A.useState)(),$=a()(ne,2),ue=$[0],te=$[1],re=(0,A.useState)({}),Y=a()(re,2),C=Y[0],ae=Y[1],oe=(0,A.useState)(!1),F=a()(oe,2),se=F[0],N=F[1],_e=function(){var o=s()(r()().mark(function n(u){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("deleteTrip"),i.abrupt("return",(0,O.request)("/api/trips/"+u,{method:"DELETE"}).then(function(){var _=s()(r()().mark(function W(f){var P,I;return r()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(console.log("api_response"),console.log(f),f.status!==!0){R.next=7;break}return console.log("api_response.status"),R.next=6,V.ZP.success("Deleted successfully");case 6:K.current&&((P=K.current)===null||P===void 0||(I=P.reloadAndRest)===null||I===void 0||I.call(P));case 7:case"end":return R.stop()}},W)}));return function(W){return _.apply(this,arguments)}}()).catch(function(_){console.log(_)}));case 3:case"end":return i.stop()}},n)}));return function(u){return o.apply(this,arguments)}}(),de=(0,O.useIntl)(),ie=[{title:"ID",dataIndex:"id",key:"table-column-id",hideInSearch:!0,sorter:!0,defaultSortOrder:"descend"},{title:"Image",dataIndex:"image_url",key:"table-column-image",hideInSearch:!0,render:function(n,u){return(0,t.jsx)("img",{alt:"example",src:n,style:{height:"80px",width:"150px"}})}},{title:"Title",dataIndex:"title",key:"table-column-title",copyable:!0,hideInSearch:!0,render:function(n,u){return(0,t.jsx)("a",{onClick:function(){te(u),ee(!0)},children:n})}},{title:"Price",dataIndex:"price",key:"table-column-price",sorter:!0,hideInForm:!0,hideInSearch:!0,render:function(n){return(0,t.jsxs)("p",{children:["$ ",n]})}},{title:"Trip Start Date",dataIndex:"start_date_time",key:"table-column-trip-start-date",sorter:!0,hideInForm:!0,hideInSearch:!0,render:function(n){return(0,t.jsx)("p",{children:b()(new Date(n)).format("DD-MM-YYYY")})}},{title:"Trip End Date",dataIndex:"end_date_time",key:"table-column-trip-end-date",sorter:!0,hideInForm:!0,hideInSearch:!0,render:function(n){return(0,t.jsx)("p",{children:b()(new Date(n)).format("DD-MM-YYYY")})}},{title:"Actions",valueType:"option",key:"table-column-actions",render:function(n,u,T,i){return[(0,t.jsx)(B.ZP,{onClick:function(){O.history.push("/admin-app/trips/edit/"+u.id)},children:(0,t.jsx)(j.Z,{})},"editable"),(0,t.jsx)(B.ZP,{onClick:function(){ae(u),N(!0)},danger:!0,children:(0,t.jsx)(D.Z,{})},"deletable")]}}];return(0,t.jsxs)(H._z,{children:[(0,t.jsx)(J.Z,{actionRef:K,rowKey:"id",search:!1,toolBarRender:function(){return[(0,t.jsxs)(B.ZP,{type:"primary",onClick:function(){O.history.push("/admin-app/trips/new")},children:[(0,t.jsx)(g.Z,{})," ",(0,t.jsx)(O.FormattedMessage,{id:"pages.organizationTable.new",defaultMessage:"New"})]},"primary")]},pagination:{defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:[10,20,50,100],onChange:function(n){return console.log(n)}},request:s()(r()().mark(function o(){var n,u,T,i,_=arguments;return r()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return n=_.length>0&&_[0]!==void 0?_[0]:{},u=_.length>1?_[1]:void 0,T=_.length>2?_[2]:void 0,i=_.length>3?_[3]:void 0,console.log("params"),console.log(n),console.log("params - sort"),console.log(u),console.log("params - filter"),console.log(T),console.log("initialState?.currentUser"),console.log(p==null?void 0:p.currentUser),f.next=14,S(2e3);case 14:return f.next=16,(0,O.request)("/api/trips",{params:{page:n==null?void 0:n.current,per_page:n==null?void 0:n.pageSize,order_by:"id",order:"asc"}}).then(function(){var P=s()(r()().mark(function I(M){return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return console.log("api_response"),console.log(M),console.log("api_response.data"),console.log(M.data),console.log("api_response.data.data"),console.log(M.data.data),y.abrupt("return",{data:M.data.data,total:M.data.total,current_page:M.data.current_page});case 7:case"end":return y.stop()}},I)}));return function(I){return P.apply(this,arguments)}}()).catch(function(P){console.log(P)});case 16:return f.abrupt("return",f.sent);case 17:case"end":return f.stop()}},o)})),columns:ie}),(0,t.jsxs)(Q.Y,{open:se,onOpenChange:N,modalProps:{destroyOnClose:!0,onCancel:function(){return console.log("run")},afterClose:function(){},getContainer:function(){document.body},width:716,okText:"Confirm"},submitter:{resetButtonProps:{style:{}},submitButtonProps:{style:{}}},preserve:!1,submitTimeout:2e3,onFinish:function(){var o=s()(r()().mark(function n(u){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,S(2e3);case 2:return i.next=4,_e(C==null?void 0:C.id);case 4:return i.abrupt("return",!0);case 5:case"end":return i.stop()}},n)}));return function(n){return o.apply(this,arguments)}}(),children:[(0,t.jsxs)("h6",{style:{fontSize:"16px"},children:[(0,t.jsxs)("span",{children:[" ",(0,t.jsx)(G.Z,{style:{color:"#ff4d4f",fontSize:"20px",paddingRight:"5px"}})," "]}),"Are you sure you want to delete this trip?"]}),(0,t.jsxs)("span",{style:{fontSize:"16px",paddingLeft:"30px"},children:[(0,t.jsx)("strong",{children:" Name: "})," ",C==null?void 0:C.title]}),(0,t.jsx)(X.Z,{style:{margin:"10px 0px"}}),(0,t.jsx)("p",{style:{fontSize:"16px",paddingLeft:"30px"},children:"Please confirm if you would like to proceed with deleting this trip."}),(0,t.jsx)("span",{style:{fontSize:"16px",paddingLeft:"30px",color:"red"},children:"Note: This action cannot be undone."})]})]})};d.default=q}}]);
