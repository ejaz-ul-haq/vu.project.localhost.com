"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[441],{82061:function(x,c,e){var i=e(1413),r=e(67294),E=e(47046),n=e(91146),h=function(D,g){return r.createElement(n.Z,(0,i.Z)((0,i.Z)({},D),{},{ref:g,icon:E.Z}))},o=r.forwardRef(h);c.Z=o},47389:function(x,c,e){var i=e(1413),r=e(67294),E=e(27363),n=e(91146),h=function(D,g){return r.createElement(n.Z,(0,i.Z)((0,i.Z)({},D),{},{ref:g,icon:E.Z}))},o=r.forwardRef(h);c.Z=o},82114:function(x,c,e){var i=e(1413),r=e(67294),E=e(83707),n=e(91146),h=function(D,g){return r.createElement(n.Z,(0,i.Z)((0,i.Z)({},D),{},{ref:g,icon:E.Z}))},o=r.forwardRef(h);c.Z=o},51042:function(x,c,e){var i=e(1413),r=e(67294),E=e(42110),n=e(91146),h=function(D,g){return r.createElement(n.Z,(0,i.Z)((0,i.Z)({},D),{},{ref:g,icon:E.Z}))},o=r.forwardRef(h);c.Z=o},65268:function(x,c,e){e.r(c),e.d(c,{waitTime:function(){return U},waitTimePromise:function(){return Z}});var i=e(5574),r=e.n(i),E=e(15009),n=e.n(E),h=e(99289),o=e.n(h),A=e(47389),D=e(82061),g=e(51042),G=e(82114),H=e(6110),J=e(48590),Q=e(37476),O=e(35312),V=e(2453),B=e(14726),X=e(96074),j=e(67294),k=e(27484),b=e.n(k),a=e(85893),Z=function(){var L=o()(n()().mark(function d(){var m,v=arguments;return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return m=v.length>0&&v[0]!==void 0?v[0]:100,f.abrupt("return",new Promise(function(S){setTimeout(function(){S(!0)},m)}));case 2:case"end":return f.stop()}},d)}));return function(){return L.apply(this,arguments)}}(),U=function(){var L=o()(n()().mark(function d(){var m,v=arguments;return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return m=v.length>0&&v[0]!==void 0?v[0]:100,f.next=3,Z(m);case 3:case"end":return f.stop()}},d)}));return function(){return L.apply(this,arguments)}}(),q=function(){var d=(0,O.useModel)("@@initialState"),m=d.initialState,v=d.loading,w=d.refresh,f=d.setInitialState;console.log("initialState"),console.log(m),console.log("loading"),console.log(v);var S=(0,j.useState)(!1),z=r()(S,2),ie=z[0],ee=z[1],K=(0,j.useRef)(),te=(0,j.useState)(),Y=r()(te,2),ue=Y[0],ne=Y[1],ae=(0,j.useState)({}),$=r()(ae,2),C=$[0],re=$[1],oe=(0,j.useState)(!1),F=r()(oe,2),se=F[0],N=F[1],_e=function(){var s=o()(n()().mark(function t(u){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return console.log("deleteAttraction"),(0,O.request)("/api/attractions/"+u,{method:"DELETE"}).then(function(){var _=o()(n()().mark(function W(p){var P,R;return n()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(console.log("api_response"),console.log(p),p.status!==!0){T.next=7;break}return console.log("api_response.status"),T.next=6,V.ZP.success("Deleted successfully");case 6:K.current&&((P=K.current)===null||P===void 0||(R=P.reloadAndRest)===null||R===void 0||R.call(P));case 7:case"end":return T.stop()}},W)}));return function(W){return _.apply(this,arguments)}}()).catch(function(_){console.log(_)}),l.abrupt("return",!0);case 3:case"end":return l.stop()}},t)}));return function(u){return s.apply(this,arguments)}}(),ce=(0,O.useIntl)(),le=[{title:"ID",dataIndex:"id",key:"table-column-id",hideInSearch:!0,sorter:!0,defaultSortOrder:"descend"},{title:"Image",dataIndex:"image_url",key:"table-column-image",hideInSearch:!0,render:function(t,u){return(0,a.jsx)("img",{alt:"example",src:t,style:{height:"80px",width:"150px"}})}},{title:"Title",dataIndex:"title",key:"table-column-title",copyable:!0,hideInSearch:!0,render:function(t,u){return(0,a.jsx)("a",{onClick:function(){ne(u),ee(!0)},children:t})}},{title:"Created Date",dataIndex:"created_at",key:"table-column-created-date",sorter:!0,hideInForm:!0,hideInSearch:!0,render:function(t){return(0,a.jsx)("p",{children:b()(new Date(t)).format("DD-MM-YYYY")})}},{title:"Updated Date",dataIndex:"updated_at",key:"table-column-updated-date",sorter:!0,hideInForm:!0,hideInSearch:!0,render:function(t){return(0,a.jsx)("p",{children:b()(new Date(t)).format("DD-MM-YYYY")})}},{title:"Actions",valueType:"option",key:"table-column-actions",render:function(t,u,I,l){return[(0,a.jsx)(B.ZP,{onClick:function(){O.history.push("/admin-app/attractions/edit/"+u.id)},children:(0,a.jsx)(A.Z,{})},"editable"),(0,a.jsx)(B.ZP,{onClick:function(){re(u),N(!0)},danger:!0,children:(0,a.jsx)(D.Z,{})},"deletable")]}}];return(0,a.jsxs)(H._z,{children:[(0,a.jsx)(J.Z,{actionRef:K,rowKey:"id",search:!1,toolBarRender:function(){return[(0,a.jsxs)(B.ZP,{type:"primary",onClick:function(){O.history.push("/admin-app/attractions/new")},children:[(0,a.jsx)(g.Z,{})," ",(0,a.jsx)(O.FormattedMessage,{id:"pages.organizationTable.new",defaultMessage:"New"})]},"primary")]},pagination:{defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:[10,20,50,100],onChange:function(t){return console.log(t)}},request:o()(n()().mark(function s(){var t,u,I,l,_=arguments;return n()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return t=_.length>0&&_[0]!==void 0?_[0]:{},u=_.length>1?_[1]:void 0,I=_.length>2?_[2]:void 0,l=_.length>3?_[3]:void 0,console.log("params"),console.log(t),console.log("params - sort"),console.log(u),console.log("params - filter"),console.log(I),console.log("initialState?.currentUser"),console.log(m==null?void 0:m.currentUser),p.next=14,U(2e3);case 14:return p.next=16,(0,O.request)("/api/attractions",{params:{page:t==null?void 0:t.current,per_page:t==null?void 0:t.pageSize,order_by:"id",order:"asc"}}).then(function(){var P=o()(n()().mark(function R(M){return n()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return console.log("api_response"),console.log(M),console.log("api_response.data"),console.log(M.data),console.log("api_response.data.data"),console.log(M.data.data),y.abrupt("return",{data:M.data.data,total:M.data.total,current_page:M.data.current_page});case 7:case"end":return y.stop()}},R)}));return function(R){return P.apply(this,arguments)}}()).catch(function(P){console.log(P)});case 16:return p.abrupt("return",p.sent);case 17:case"end":return p.stop()}},s)})),columns:le}),(0,a.jsxs)(Q.Y,{open:se,onOpenChange:N,modalProps:{destroyOnClose:!0,onCancel:function(){return console.log("run")},afterClose:function(){},getContainer:function(){document.body},width:716,okText:"Confirm"},submitter:{resetButtonProps:{style:{}},submitButtonProps:{style:{}}},preserve:!1,submitTimeout:2e3,onFinish:function(){var s=o()(n()().mark(function t(u){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,U(2e3);case 2:return l.next=4,_e(C==null?void 0:C.id);case 4:return l.abrupt("return",!0);case 5:case"end":return l.stop()}},t)}));return function(t){return s.apply(this,arguments)}}(),children:[(0,a.jsxs)("h6",{style:{fontSize:"16px"},children:[(0,a.jsxs)("span",{children:[" ",(0,a.jsx)(G.Z,{style:{color:"#ff4d4f",fontSize:"20px",paddingRight:"5px"}})," "]}),"Are you sure you want to delete this attraction?"]}),(0,a.jsxs)("span",{style:{fontSize:"16px",paddingLeft:"30px"},children:[(0,a.jsx)("strong",{children:" Name: "})," ",C==null?void 0:C.title]}),(0,a.jsx)(X.Z,{style:{margin:"10px 0px"}}),(0,a.jsx)("p",{style:{fontSize:"16px",paddingLeft:"30px"},children:"Please confirm if you would like to proceed with deleting this attraction."}),(0,a.jsx)("span",{style:{fontSize:"16px",paddingLeft:"30px",color:"red"},children:"Note: This action cannot be undone."})]})]})};c.default=q}}]);
