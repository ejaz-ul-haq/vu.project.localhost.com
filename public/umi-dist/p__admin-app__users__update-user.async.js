"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[999],{51042:function(N,v,n){var O=n(1413),g=n(67294),M=n(42110),c=n(91146),u=function(i,f){return g.createElement(c.Z,(0,O.Z)((0,O.Z)({},i),{},{ref:f,icon:M.Z}))},_=g.forwardRef(u);v.Z=_},58547:function(N,v,n){n.d(v,{h:function(){return g},y:function(){return M}});var O=n(67294),g=function(u){return console.log("Upload event:",u),Array.isArray(u)?u:u&&u.fileList},M=function(u){return new Promise(function(_,A){var i=new FileReader;i.readAsDataURL(u.file.originFileObj),i.onload=function(){var f=i.result;console.log("DataURL: test",f),_(f)},i.onerror=function(f){return A(f)}})}},86332:function(N,v,n){n.r(v);var O=n(97857),g=n.n(O),M=n(5574),c=n.n(M),u=n(15009),_=n.n(u),A=n(99289),i=n.n(A),f=n(6110),j=n(34994),te=n(2236),_e=n(58128),B=n(5966),se=n(64317),H=n(2453),ie=n(53025),V=n(71230),E=n(15746),J=n(14726),de=n(55060),ue=n(66476),me=n(51042),ce=n(88484),Q=n(87547),C=n(67294),U=n(35312),X=n(58547),r=n(85893),Y=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(e){setTimeout(function(){e(!0)},h)})},k={image_url:"",first_name:"",last_name:"",name:"",email:"",role:"",password:""},pe=function(){var L=i()(_()().mark(function h(e){var d,T;return _()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",e),d=new FormData,console.log("formData - before"),console.log(d),d.append("first_name",e==null?void 0:e.first_name),d.append("last_name",e==null?void 0:e.last_name),d.append("name",(e==null?void 0:e.first_name)+" "+(e==null?void 0:e.last_name)),d.append("email",e==null?void 0:e.email),d.append("role",e==null?void 0:e.role),d.append("password",e==null?void 0:e.password),d.append("password_confirmation",e==null?void 0:e.password_confirmation),console.log("formData - after"),console.log(d),l.prev=14,T={image:e==null?void 0:e.image_url,first_name:e==null?void 0:e.first_name,last_name:e==null?void 0:e.last_name,name:(e==null?void 0:e.first_name)+" "+(e==null?void 0:e.last_name),email:e==null?void 0:e.email,role:e==null?void 0:e.role,password:e==null?void 0:e.password},l.next=18,(0,U.request)("/api/users/"+(e==null?void 0:e.user_id),{method:"PUT",data:T}).then(function(){var I=i()(_()().mark(function W(p){var P,D;return _()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:console.log("api_response"),console.log(p),(p==null||(P=p.data)===null||P===void 0?void 0:P.id)>0&&(H.ZP.success("Submitted successfully"),U.history.push("/admin-app/users/edit/"+(p==null||(D=p.data)===null||D===void 0?void 0:D.id)));case 3:case"end":return x.stop()}},W)}));return function(W){return I.apply(this,arguments)}}()).catch(function(I){console.log(I)});case 18:return l.abrupt("return",l.sent);case 21:l.prev=21,l.t0=l.catch(14),console.log("api_response - error"),console.log(l.t0);case 25:return l.abrupt("return",!0);case 26:case"end":return l.stop()}},h,null,[[14,21]])}));return function(e){return L.apply(this,arguments)}}(),fe=function(){var h=(0,U.useParams)(),e=ie.Z.useForm(),d=c()(e,1),T=d[0],q=(0,C.useState)(""),l=c()(q,2),I=l[0],W=l[1],p=(0,C.useState)(0),P=c()(p,2),D=P[0],ee=P[1],x=(0,C.useState)(""),ne=c()(x,2),b=ne[0],ge=ne[1],ve=(0,C.useState)(b),re=c()(ve,2),oe=re[0],ae=re[1];(0,C.useEffect)(function(){ee(h.id)},[]);var Ee=function(o){o.file.status!=="uploading"&&(o.file.status=="removed"&&ae(""),o.file.status==="done"&&(0,X.y)(o).then(function(s){console.log("base64String"),console.log(s),ae(s)}),o.file.status==="error"&&H.ZP.error("".concat(o.file.name," file upload failed.")))};return(0,r.jsxs)(f._z,{children:[(0,r.jsxs)(V.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,r.jsx)(E.Z,{flex:"auto"}),(0,r.jsx)(E.Z,{flex:"100px",children:(0,r.jsxs)(J.ZP,{type:"primary",onClick:function(){U.history.push("/admin-app/users/new")},style:{marginBlockEnd:15},children:[(0,r.jsx)(me.Z,{})," New"]},"primary")})]}),(0,r.jsx)(j.A,{layout:"vertical",grid:!0,form:T,initialValues:k,params:{user_id:D},request:i()(_()().mark(function m(){var o,s=arguments;return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=s.length>0&&s[0]!==void 0?s[0]:{},console.log("proform-params"),console.log(o),(o==null?void 0:o.user_id)!=0){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,Y(2e3);case 7:return t.next=9,(0,U.request)("/api/users/"+(o==null?void 0:o.user_id),{method:"GET"}).then(function(){var K=i()(_()().mark(function le(a){var y,Z,S,F,$,w,G,z;return _()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return console.log("api_response"),console.log(a),ge(a==null||(y=a.data)===null||y===void 0?void 0:y.image_url),R.abrupt("return",g()(g()({},k),{},{image_url:a==null||(Z=a.data)===null||Z===void 0?void 0:Z.image_url,first_name:a==null||(S=a.data)===null||S===void 0?void 0:S.first_name,last_name:a==null||(F=a.data)===null||F===void 0?void 0:F.last_name,name:a==null||($=a.data)===null||$===void 0?void 0:$.name,email:a==null||(w=a.data)===null||w===void 0?void 0:w.email,role:a==null||(G=a.data)===null||G===void 0?void 0:G.role,password:a==null||(z=a.data)===null||z===void 0?void 0:z.password}));case 4:case"end":return R.stop()}},le)}));return function(le){return K.apply(this,arguments)}}()).catch(function(K){console.log(K)});case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}},m)})),onFinish:function(){var m=i()(_()().mark(function o(s){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(s),t.next=3,Y(1e3);case 3:return s.user_id=D,s.image_url=oe,t.next=7,pe(s);case 7:case"end":return t.stop()}},o)}));return function(o){return m.apply(this,arguments)}}(),formProps:{validateMessages:{required:"This is required"}},submitter:{render:function(o,s){return(0,r.jsx)(te.S,{children:s})}},children:(0,r.jsx)(_e.Z,{title:"Account Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(o){return console.log(o)},children:(0,r.jsxs)(V.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,r.jsx)(E.Z,{span:6,children:(0,r.jsxs)(j.A.Group,{size:24,children:[(0,r.jsx)(E.Z,{span:24,children:(0,r.jsx)(de.Z,{width:"100%",height:200,src:oe,fallback:b!==""?b:"http://vu.project.localhost.com/images/default/user-profile-image.png"})}),(0,r.jsx)(E.Z,{span:24,style:{textAlign:"center"},children:(0,r.jsx)(j.A.Item,{name:"image_url",getValueFromEvent:X.h,children:(0,r.jsx)(ue.Z,{name:"image_url",onChange:Ee,maxCount:1,children:(0,r.jsx)(J.ZP,{type:"primary",icon:(0,r.jsx)(ce.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(o){},children:"Change Image"})})})})]})}),(0,r.jsxs)(E.Z,{span:18,children:[(0,r.jsxs)(j.A.Group,{size:24,children:[(0,r.jsx)(B.Z,{name:"first_name",label:"First Name",placeholder:"Type First Name",fieldProps:{prefix:(0,r.jsx)(Q.Z,{}),onChange:function(o){console.log("e.target.value"),console.log(o.target.value)}},colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,r.jsx)(B.Z,{name:"last_name",label:"Last Name",placeholder:"Type Last Name",fieldProps:{prefix:(0,r.jsx)(Q.Z,{}),onChange:function(o){console.log("e.target.value"),console.log(o.target.value)}},colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]}),(0,r.jsxs)(j.A.Group,{size:24,children:[(0,r.jsx)(B.Z,{label:"Email",name:"email",placeholder:"info@example.com etc.",rules:[{required:!0}],disabled:!0,colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,r.jsx)(se.Z,{name:"role",label:"Role",showSearch:!0,debounceTime:300,options:[{label:"Admin",value:"admin"},{label:"User",value:"user"}],placeholder:"Please Select User Role",colProps:{xs:24,sm:24,md:12,lg:12,xl:12},rules:[{required:!0,message:"Please select your role!"}]})]})]})]})})})]})};v.default=fe}}]);
